# ============================================================================
# Impulsar - Environment Variables Template
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file to .env in the root directory: cp .env.example .env
# 2. Replace all placeholder values with your actual credentials
# 3. NEVER commit .env to git (it's in .gitignore)
# 4. Production secrets are managed via cloud provider (AWS Secrets Manager, etc.)
#
# VALIDATION:
# - All variables are validated at runtime using Zod schemas (@impulsar/config)
# - Required secrets MUST be provided - service fails to start if missing
# - Optional secrets have reasonable defaults (Stellar Testnet URLs, ports, etc.)
# - This ensures production-ready validation from day 0 (no "relaxed mode" surprises)
# ============================================================================

# ============================================================================
# Supabase (Database & Authentication Backend)
# ============================================================================
# Required: Valid Supabase project URL (must start with https://)
# Get from: https://app.supabase.com/project/_/settings/api
SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co

# Required: Service role key (backend services only, has full database access)
# Get from: https://app.supabase.com/project/_/settings/api (under "Service role")
# WARNING: This key bypasses Row Level Security - keep it SECRET
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: Anon key (frontend only, respects Row Level Security)
# Get from: https://app.supabase.com/project/_/settings/api (under "Anon public")
# Only needed if running frontend with NEXT_PUBLIC_SUPABASE_ANON_KEY
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ============================================================================
# Stellar Network Configuration (TESTNET - for development)
# ============================================================================
# Network passphrase (identifies which Stellar network to use)
# TESTNET value (default):
STELLAR_NETWORK_PASSPHRASE="Test SDF Network ; September 2015"
# MAINNET value (for production - DO NOT USE IN DEVELOPMENT):
# STELLAR_NETWORK_PASSPHRASE="Public Global Stellar Network ; September 2015"

# Horizon API URL (Stellar blockchain query endpoint)
# TESTNET (default):
STELLAR_HORIZON_URL=https://horizon-testnet.stellar.org
# MAINNET (for production):
# STELLAR_HORIZON_URL=https://horizon.stellar.org

# Soroban RPC URL (smart contract interaction endpoint)
# TESTNET (default):
STELLAR_SOROBAN_RPC_URL=https://soroban-testnet.stellar.org
# MAINNET (for production):
# STELLAR_SOROBAN_RPC_URL=https://soroban-rpc.stellar.org

# CRITICAL: Operational wallet secret key (signs blockchain transactions)
# This is the government treasury wallet that holds CLPs and signs transfers
# Required: Must start with 'S' (Stellar secret key format)
# TESTNET EXAMPLE (56 characters):
STELLAR_OPERATIONAL_SECRET_KEY=SXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
#
# How to generate a testnet keypair:
# 1. Visit: https://laboratory.stellar.org/#account-creator?network=test
# 2. Click "Generate keypair"
# 3. Fund the account with testnet XLM (automatic via Friendbot)
# 4. Copy the SECRET KEY (starts with S) here
# 5. NEVER use mainnet keys during development
# 6. NEVER commit real secret keys to git

# ============================================================================
# Auth Service Configuration
# ============================================================================
# JWT signing secret (used to sign and verify JSON Web Tokens)
# Required: Minimum 32 characters (enforced by Zod validation)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-abc123xyz789

# JWT token expiry (access token lifetime)
# Format: Zeit/ms format (e.g., "24h", "7d", "60s", "1m")
# Default: 24h
JWT_EXPIRY=24h

# JWT refresh token expiry (refresh token lifetime)
# Format: Zeit/ms format
# Default: 7d (should be longer than JWT_EXPIRY)
JWT_REFRESH_EXPIRY=7d

# ============================================================================
# Microservice Ports (Local Development)
# ============================================================================
# Transfer Service port (handles CLP transfer operations)
# Default: 3001
TRANSFER_SERVICE_PORT=3001

# Auth Service port (handles user authentication and JWT management)
# Default: 3002
AUTH_SERVICE_PORT=3002

# ============================================================================
# Node Environment (for local development)
# ============================================================================
# Set to "development" for local work, "production" for deployment
NODE_ENV=development

# ============================================================================
# Frontend Configuration (Optional - for Next.js frontend)
# ============================================================================
# Backend API URL (where frontend sends requests)
# Local development default:
NEXT_PUBLIC_API_URL=http://localhost:3001
# Production example:
# NEXT_PUBLIC_API_URL=https://api.impulsar.gov.cl

# ============================================================================
# SECURITY NOTES
# ============================================================================
# ✅ DO:
#   - Copy this file to .env and fill in real values
#   - Use testnet keys during development
#   - Rotate JWT_SECRET periodically
#   - Use cloud secrets manager in production (AWS Secrets Manager, GCP Secret Manager)
#   - Generate strong JWT_SECRET with: openssl rand -base64 32
#
# ❌ DO NOT:
#   - Commit .env to git (it's in .gitignore)
#   - Use mainnet Stellar keys during development
#   - Share SUPABASE_SERVICE_ROLE_KEY (it bypasses all security)
#   - Use weak JWT_SECRET (minimum 32 characters enforced)
#   - Hard-code secrets in source code
# ============================================================================

# ============================================================================
# Soroban Smart Contracts (Stellar Testnet)
# ============================================================================
# CEROracle Contract 
# Stores immutable CER values on-chain
# Testnet deployment:
CER_ORACLE_CONTRACT_ID=C...

# AttestationManager Contract 
# Identity verification for multi-sig (BCRA + ANSES validation)
ATTESTATION_MANAGER_CONTRACT_ID=C...

# TransferEngine Contract (Phase 3 - future implementation )
# Handles ARU transfers on-chain
TRANSFER_ENGINE_CONTRACT_ID=C...

# ============================================================================
# Testnet Signers (ONLY for development - DO NOT use in production)
# ============================================================================
# BCRA mock signer (Banco Central)
BCRA_PUBLIC_KEY=G...

# ANSES mock signer (government benefits agency)
ANSES_PUBLIC_KEY=G...

# Deployer keypair (used for contract deployment)
# WARNING: NEVER commit the actual secret key
# (STELLAR_OPERATIONAL_SECRET_KEY could work here for simplicity)
DEPLOYER_SECRET_KEY=S...

# ============================================================================
# Soroban Smart Contracts - (Multi-signature versions)
# ============================================================================
# AttestationManager Contract (identity verification)
ATTESTATION_MANAGER_CONTRACT_ID=CXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# CEROracle v2 (with multi-sig validation)
CER_ORACLE_CONTRACT_ID=CYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY

# CEROracle v1 (deprecated - single signature)
# CER_ORACLE_V1_CONTRACT_ID=CA57C6VBLAZE45CBSFDFPDGOL2UGTFOVDH5VPDVRX3BVMWQRL7BEL5HA

# Testnet Signers (ONLY for development - DO NOT use in production)
BCRA_PUBLIC_KEY=GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
ANSES_PUBLIC_KEY=GXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
